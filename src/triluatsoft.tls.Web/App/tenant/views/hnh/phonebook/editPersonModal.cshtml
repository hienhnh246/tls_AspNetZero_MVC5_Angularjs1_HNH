@using triluatsoft.tls.HNH.People

<div>
    <form name="editPersonForm" role="form" novalidate class="form-validation">
        <div class="modal-header">
            <h4 class="modal-title">
                <span>@L("EditPerson")</span>
            </h4>
        </div>
        <div class="modal-body">

            <div class="form-group form-md-line-input form-md-floating-label no-hint">
                <input class="form-control" type="text" name="Name" ng-class="{'edited':vm.person.name}" ng-model="vm.person.name" required maxlength="@Person.MaxNameLength">
                <label>@L("Name")</label>
            </div>

            <div class="form-group form-md-line-input form-md-floating-label no-hint">
                <input type="text" name="Surname" class="form-control" ng-class="{'edited':vm.person.surname}" ng-model="vm.person.surname" required maxlength="@Person.MaxSurnameLength">
                <label>@L("Surname")</label>
            </div>

            <div class="form-group form-md-line-input form-md-floating-label no-hint">
                <input type="email" name="EmailAddress" class="form-control" ng-class="{'edited':vm.person.emailAddress}" ng-model="vm.person.emailAddress" maxlength="@Person.MaxEmailAddressLength">
                <label>@L("EmailAddress")</label>
            </div>

            <p style="color:#888; font-size:13px">@L("PhoneNumber") ({{vm.person.phones.length}})</p>
            <div class="table-scrollable">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th style="width:10%"></th>
                            <th style="width:30%">@L("Type")</th>
                            <th style="width:60%">@L("PhoneNumber")</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="phone in vm.person.phones">
                            <td>
                                <div class="row" style="margin-left:1px">
                                    <div class="col-6">
                                        <button ng-click="vm.editPhone(phone, vm.person)" class="btn btn-sm btn-default">
                                            <i class="icon-pencil"></i>
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button ng-click="vm.deletePhone(phone, vm.person)" class="btn btn-sm btn-default">
                                            <i class="icon-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                @*<select name="Type" class="form-control" ng-class="{'edited':phone.type}" ng-model="phone.type">
                                        <option value="0">@L("PhoneType_Mobile")</option>
                                        <option value="1">@L("PhoneType_Home")</option>
                                        <option value="2">@L("PhoneType_Business")</option>
                                    </select>*@

                                <select name="Type" class="form-control"
                                        ng-options="option.name for option in vm.typeOptions track by option.id"
                                        ng-model="phone.typeSelect">
                                </select>
                            </td>
                            <td>
                                <input type="number" class="form-control" name="Number" ng-class="{'edited':phone.number}" ng-model="phone.number" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
        <div class="modal-footer">
            <button ng-disabled="vm.saving" type="button" class="btn btn-default" ng-click="vm.cancel()">@L("Cancel")</button>
            <button type="submit" button-busy="vm.saving" busy-text="@L("SavingWithThreeDot")" class="btn btn-primary blue" ng-click="vm.save(vm.person)" ng-disabled="editPersonForm.$invalid"><i class="fa fa-save"></i> <span>@L("Save")</span></button>
        </div>
    </form>
</div>